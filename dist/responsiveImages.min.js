(function(){var t,i,e=function(t,i){return function(){return t.apply(i,arguments)}};t=function(t,i,e){return null!=t?t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e:void 0},i=function(){function i(){this.onresize=e(this.onresize,this),this.injectImage=e(this.injectImage,this),this.getAttrPaths=e(this.getAttrPaths,this),this.updateImages=e(this.updateImages,this),this.optimizeImage=e(this.optimizeImage,this),this.getOptimisedSrc=e(this.getOptimisedSrc,this),this.setPaths=e(this.setPaths,this),this.clientWidth=document.documentElement.clientWidth,this.className="responsiveImage",this.attrPathId="data-path-",this.paths={},this.images=[],t(window,"resize",this.onresize)}return i.prototype.setPaths=function(t){var i,e,s;s=[];for(i in t)e=t[i],null!=this.paths[i]?s.push(this.paths[i]=this.mergeSizes(this.paths[i],e)):s.push(this.paths[i]=e);return s},i.prototype.mergeSizes=function(t,i){var e,s,n;e=i;for(s in t)n=t[s],null==e[s]&&(e[s]=n);return e},i.prototype.getOptimisedSrc=function(t){var i,e,s,n;n=t.getAttribute("data-src"),e=this.mergeSizes(this.paths[n],this.getAttrPaths(t));for(s in e)i=e[s],this.clientWidth>s&&(n=i);return n},i.prototype.optimizeImage=function(t){var i;i=this.getOptimisedSrc(t),t.src!==i&&("hidden"===t.style.visibility&&(t.onload=function(){return this.style.visibility="visible",this.onload=null}),t.src=i)},i.prototype.updateImages=function(){var t,i,e,s;for(this.clientWidth=document.documentElement.clientWidth,s=this.images,i=0,e=s.length;e>i;i++)t=s[i],this.optimizeImage(t)},i.prototype.getAttrPaths=function(t){var i,e,s,n,h,a,r,o;for(h=t.getAttribute("data-src"),n={},o=t.attributes,a=0,r=o.length;r>a;a++)i=o[a],0===i.name.indexOf(this.attrPathId)&&(s=i.name.substr(this.attrPathId.length),e=i.value,n[s]=e);return n},i.prototype.injectImage=function(t){return t.onload=null,t.removeAttribute("onload"),t.className+=" "+this.className,this.images.push(t),this.optimizeImage(t)},i.prototype.onresize=function(){return null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.updateImages,250)},i}(),this.responsiveImages=new i}).call(this);