/*!
responsiveImages v0.0.0
Author: thomaswelton@me.com
*/
(function(){var t,e,i=function(t,e){return function(){return t.apply(e,arguments)}};t=function(t,e,i){return null!=t?t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i:void 0},e=function(){function e(){this.onresize=i(this.onresize,this),this.injectImage=i(this.injectImage,this),this.getAttrPaths=i(this.getAttrPaths,this),this.updateImages=i(this.updateImages,this),this.optimizeImage=i(this.optimizeImage,this),this.getOptimisedSrc=i(this.getOptimisedSrc,this),this.setPaths=i(this.setPaths,this),this.clientWidth=document.documentElement.clientWidth,this.className="responsiveImage",this.attrPathId="data-path-",this.paths={},this.images=[],t(window,"resize",this.onresize)}return e.prototype.setPaths=function(t){var e,i,s;s=[];for(e in t)i=t[e],null!=this.paths[e]?s.push(this.paths[e]=this.mergeSizes(this.paths[e],i)):s.push(this.paths[e]=i);return s},e.prototype.mergeSizes=function(t,e){var i,s,n;i=e;for(s in t)n=t[s],null==i[s]&&(i[s]=n);return i},e.prototype.getOptimisedSrc=function(t){var e,i,s,n;n=t.getAttribute("data-src"),i=this.mergeSizes(this.paths[n],this.getAttrPaths(t));for(s in i)e=i[s],this.clientWidth>s&&(n=e);return n},e.prototype.optimizeImage=function(t){var e;e=this.getOptimisedSrc(t),t.src!==e&&(t.src=e)},e.prototype.updateImages=function(){var t,e,i,s;for(this.clientWidth=document.documentElement.clientWidth,s=this.images,e=0,i=s.length;i>e;e++)t=s[e],this.optimizeImage(t)},e.prototype.getAttrPaths=function(t){var e,i,s,n,h,a,r,o;for(h=t.getAttribute("data-src"),n={},o=t.attributes,a=0,r=o.length;r>a;a++)e=o[a],0===e.name.indexOf(this.attrPathId)&&(s=e.name.substr(this.attrPathId.length),i=e.value,n[s]=i);return n},e.prototype.injectImage=function(t){return t.onload=null,t.removeAttribute("onload"),t.className+=" "+this.className,this.images.push(t),this.optimizeImage(t)},e.prototype.onresize=function(){return null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.updateImages,250)},e}(),this.responsiveImages=new e}).call(this);